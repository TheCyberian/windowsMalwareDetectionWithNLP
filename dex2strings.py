import re
import subprocess

# TODO 1: Read all the dex files from all apks
# TODO 2: Store that in a csv/txt for each apk
# TODO 3: Vectorize the dex values.


def extract_strings_from_xml_in_path(output_path=None):
    cmd_out: bytes = subprocess.run(
        'find /home/cyberian/PycharmProjects/androidFeatureExtraction/apks/decompiled/ -type f -name "*.dex"',
        shell=True,
        capture_output=True,
        text=True,
        check=True).stdout.split('\n')

    print(cmd_out)
    # apk_names_list = []
    # for index, file_path in enumerate(cmd_out):
    #     if len(file_path) > 0:
    #         pattern = "\/\w+\/\w+\/\w+\/\w+\/\w+\/\w+\/\w+\/\w+"
    #         file_name = re.search(pattern, file_path).group(0)
    #         apk_names_list.append(file_name)
    #     else:
    #         print("Probably the end of list!")
    #
    # unique_file_names = set(apk_names_list)
    # print(apk_names_list)


extract_strings_from_xml_in_path()
